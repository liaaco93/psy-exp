// Generated by CoffeeScript 1.7.1
(function() {
  var loadExps;

  loadExps = function() {
    return $.get('/admin/viewexps', function(data, txtStatus, jqXHR) {
      var exp, _i, _len, _results;
      $('#experimentData').children().detach();
      _results = [];
      for (_i = 0, _len = data.length; _i < _len; _i++) {
        exp = data[_i];
        _results.push($('#experimentData').append("<tr> <td>" + exp.name + "</td> <td>" + (exp["private"] ? 'yes' : 'no') + "</td> <td>" + (exp.anonymous ? 'yes' : 'no') + "</td> <td>" + exp.timeLimit + "</td> <td>" + exp.start + "</td> <td>" + exp.end + "</td> <td><form><input type='button' id=" + exp._id + " class='experi' value='goto " + exp._id + "'/></td> </tr>"));
      }
      return _results;
    });
  };

  $(loadExps);

  $('#newExp').submit(function() {
    $.post('/admin/newexp', {
      name: this.name.value,
      "private": this["private"].checked,
      anonymous: this.anonymous.checked,
      timeLimit: this.timeLimit.value,
      start: this.start.value,
      end: this.end.value
    }).done(loadExps).fail(function(data) {
      return console.log("FAILURE" + data.status);
    });
    return false;
  });

  $('#experimentData').on('click', '.experi', function() {
    var tabId, tabMenu;
    tabMenu = $("#tabMenu", parent.document);
    tabMenu.children().removeClass("active");
    tabId = $(this).attr("id");
    if (tabMenu.find("#exp\\ " + tabId).length <= 0) {
      tabMenu.append("<a id='exp " + ($(this).attr("id")) + "' eid='" + ($(this).attr("id")) + "' class='item'> " + ($(this).attr('id')) + " </a>");
    }
    tabMenu.find("#exp\\ " + tabId).addClass("active");
    return $("#tabContents", parent.document).attr("src", "/admin/view/" + ($(this).attr('id')));
  });

}).call(this);

//# sourceMappingURL=admin-gui-exptable.map
